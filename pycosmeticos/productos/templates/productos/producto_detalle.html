{% extends 'base_producto_detalle.html' %}

{% block product_detail %}
<div class="product-detail-container">
    <div class="product-image">
        {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
                {% else %}
                <div class="no-image">üì¶</div>
                {% endif %}
            </div>

    <div class="product-info">
        <h1>{{ producto.nombre }}</h1>
        <p>{{ producto.descripcion }}</p>
        <p>Tipo: {{ producto.tipo.nombre }}</p>
        <p>Color: {{ producto.color.nombre }}</p>

        {% if precio_final != producto.precio %}
            <p>Precio: <span class="original-price">S/ {{ producto.precio }}</span> 
               <span class="discounted-price">S/ {{ precio_final }}</span>
            </p>
        {% else %}
            <p>Precio: S/ {{ producto.precio }}</p>
        {% endif %}
        
        <!-- Estrellas (dummy) -->
        <div class="rating">
            ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ ({{ producto.rese√±as.count }})
        </div>

        <button class="add-to-cart">Agregar al carrito üõí</button>
        <button class="favorite">‚ô•</button>
        
        <div class="shipping-info">
            Enviar a Per√∫<br>
            Env√≠o Est√°ndar gratuito en compras > S/ 250 (15-20 d√≠as h√°biles)<br>
            Devoluciones y cambios
        </div>
        
        <div class="editor-note">
            Nota del Editor: Amplifica esas vibraciones veraniegas...
        </div>
        
        <div class="product-details">
            <h3>Detalles</h3>
            <p>Ingredientes principales e informaci√≥n adicional...</p>
        </div>

        <!-- Bot√≥n volver a la categor√≠a -->
        <a href="{% url 'productos:list' %}" class="back-to-category">‚Üê Volver a Productos</a>

    </div>
</div>

<!-- Productos similares -->
<section class="similar-products">
    <h2>Productos Similares</h2>
    <div class="products-grid">
        {% for p in productos_similares %}
            <a href="{% url 'productos:detalle' p.id %}">
                <div class="product-card">
                    <div class="product-image">
                        {% if p.imagen %}
                            <img src="{{ p.imagen.url }}" alt="{{ p.nombre }}">
                        {% else %}
                            üì¶
                        {% endif %}
                    </div>
                    <div class="product-info">
                        <div class="product-name">{{ p.nombre }}</div>
                        <div class="product-price">S/ {{ p.precio }}</div>
                    </div>
                </div>
            </a>
        {% empty %}
            <p>No hay productos similares.</p>
        {% endfor %}
    </div>
</section>

<!-- Rese√±as -->
<section class="product-reviews">
    <h2>Rese√±as</h2>
    {% for r in producto.rese√±as.all %}
        <div class="review">
            <p><strong>{{ r.usuario }}</strong> dice:</p>
            <p>{{ r.comentario }}</p>
        </div>
    {% empty %}
        <p>A√∫n no hay rese√±as para este producto.</p>
    {% endfor %}
</section>

{% endblock %}
